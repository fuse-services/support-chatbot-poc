<!DOCTYPE html>
<html>

<head>
    <title>Chatbot Example</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css'>    
</head>

<body>

    <div>
        <div id="QASection">
            <form id="issue-detail">
                <div class="question">1. What is the issue/problem?</div>
                <div class="answer">
                    <input type="text" placeholder="Enter your answer here" id="answer-txt1">
                </div>

                <div class="question">2. What are the steps that you encountered the issue?</div>
                <div class="answer">
                    <input type="text" placeholder="Enter your answer here" id="answer-txt2">
                </div>

                <div class="question">3. What is the actual result that you got?</div>
                <div class="answer">
                    <input type="text" placeholder="Enter your answer here" id="answer-txt3">
                </div>

                <div class="question">4. What is your expected result?</div>
                <div class="answer">
                    <input type="text" placeholder="Enter your answer here" id="answer-txt4">
                </div>
                <div class="question">5. Attach Screenshots</div>
                <div id="drop-area">
                    <input type="file" id="screenshot-input" multiple>
                    <span class="drop-message" id="screenshot-name">Drag and Drop or click to upload the screenshot images.</span>
                </div>
                <div class="question">6. Attach xsn file</div>
                <div id="drop-area-xsn">
                    <input type="file" id="xsn-file-input">
                    <span class="drop-message" id="xsn-file-name">Drag and Drop or click to upload the xsn file.</span>
                </div>
                <button id="submit-issue" type="submit">Search Solution</button>
            </form>
        </div>

        <div id="SearchedSolution">
            <div id="similar-issues"></div>
            <input id="btn-generate-solution" type="button" value="Generate Solution">
            <div id="generated-solution"></div>
        </div>
    </div>

    <div id="chatbox">
        <div id="chatlog"></div>
        <form id="message-form">
            <div style="display: flex; align-items: center; padding: 5px;">
                <div id="user-icon"><strong>User:</strong></div>
                <input type="text" id="message-input" placeholder="Type your message..." required />
                <button type="submit" style="align-items: center; padding: 10px;">Send</button>
                <div id="chatbot-icon"></div>
            </div>
        </form>
    </div>

    <div class="loader-overlay" id="loader-div" style="display: none;">
        <div class="loader"></div>
    </div>
    
    <script language="javascript" src="./scripts/request-api.js" > </script>
    <script language="javascript" src="./scripts/render-message.js" > </script>
    <script language="javascript" src="./scripts/scripting.js" > </script>
    <script language="javascript" src="./scripts/handle-files.js" > </script>
    <script>
        
        makeOpenAICall([{ "role": "system", "content": `You are a Qdabra Support Assistant, ${questions[0].prompt}` }]);
        // makeOpenAICall(questionContext);

        function showLoader(show) {
            const loader = document.getElementById("loader-div");
            loader.style.display = show == true ? "block" : "none";
        }
    </script>
</body>

</html>
